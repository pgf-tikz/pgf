% Copyright 2006 by Till Tantau
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/generic/pgf/licenses/LICENSE for more details.

\ProvidesFileRCS[v\pgfversion] $Header$

\usetikzlibrary{fadings}


% General options
\tikzset{
  /tikz/shadow/scale/.initial=1,
  /tikz/shadow/xshift/.initial=.5ex,
  /tikz/shadow/yshift/.initial=-.5ex,
  /tikz/shadow/color/.initial=black!50,
  /tikz/shadow/opacity/.initial=1,
  /tikz/shadow/background/.style={}
}
\let\tikz@lib@shadow@bg=\pgfutil@empty

% Basic shadow style
\tikzset{
  /tikz/general shadow/.style={
    preaction={
      /tikz/shadow/.cd,
      #1,
      /tikz/.cd,
      fill=\pgfkeysvalueof{/tikz/shadow/color},
      opacity=\pgfkeysvalueof{/tikz/shadow/opacity},
      transform canvas={
        scale around=\pgfkeysvalueof{/tikz/shadow/scale}:(current path bounding box.center),
        shift={(\pgfkeysvalueof{/tikz/shadow/xshift},\pgfkeysvalueof{/tikz/shadow/yshift})}
      },
      /tikz/shadow/background
    }
  },
  /tikz/every shadow/.style={}
}



%
% Adds a simple general shadow to a path
%

\tikzset{
  /tikz/shadow/.style={
    general shadow={%
      scale=1,
      xshift=.5ex,
      yshift=-.5ex,
      opacity=.5,
      /tikz/every shadow,
      #1
    }
  }
}


%
% Adds a circular shadow to a path
%

\tikzset{
  /tikz/circular shadow/.style={
    general shadow={%
      scale=1.1,
      xshift=.3ex,
      yshift=-.3ex,
      /tikz/path fading={circle with fuzzy edge 15 percent},
      /tikz/every shadow,
      #1
    }
  }
}



%
% Adds a circular glow to a path
%

\tikzset{
  /tikz/circular glow/.style={
    general shadow={%
      scale=1.25,
      xshift=0pt,
      yshift=0pt,
      /tikz/path fading={circle with fuzzy edge 15 percent},
      /tikz/every shadow,
      #1,
    }
  }
}





%
% Adds a "copy" version of the path behind it.
%

\tikzset{
  /tikz/copy shadow/.style={
    general shadow={%
      /utils/exec={\let\tikz@lib@shadow@fill=\tikz@fillcolor\let\tikz@lib@shadow@draw=\tikz@strokecolor},
      scale=1,
      xshift=.5ex,
      yshift=.5ex,
      opacity=1,
      background/.style={fill=\tikz@lib@shadow@fill,draw=\tikz@lib@shadow@draw},
      /tikz/every shadow,
      #1
    }
  }
}


%
% Adds two "copies" of the path behind it.
%

\tikzset{
  /tikz/double copy shadow/.style={
    general shadow={%
      /utils/exec={\let\tikz@lib@shadow@fill=\tikz@fillcolor\let\tikz@lib@shadow@draw=\tikz@strokecolor},
      scale=1,
      xshift=.5ex,
      yshift=.5ex,
      opacity=1,
      background/.style={fill=\tikz@lib@shadow@fill,draw=\tikz@lib@shadow@draw},
      /tikz/every shadow,
      #1,
      xshift/.expanded=2*\pgfkeysvalueof{/tikz/shadow/xshift},
      yshift/.expanded=2*\pgfkeysvalueof{/tikz/shadow/yshift},
    },
    general shadow={%
      /utils/exec={\let\tikz@lib@shadow@fill=\tikz@fillcolor\let\tikz@lib@shadow@draw=\tikz@strokecolor},
      scale=1,
      xshift=.5ex,
      yshift=.5ex,
      opacity=1,
      background/.style={fill=\tikz@lib@shadow@fill,draw=\tikz@lib@shadow@draw},
      /tikz/every shadow,
      #1
    },
  }
}

