% Copyright 2008 by Till Tantau
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/generic/pgf/licenses/LICENSE for more details.

\ProvidesFileRCS[v\pgfversion] $Header$

\usetikzlibrary{datavisualization}
\usepgflibrary{datavisualization.polar}


\tikzdatavisualizationset{%
  new polar axes/.style 2 args={
    new axis base=#1,
    #1={attribute=angle},
    new axis base=#2,
    #2={attribute=radius},
    #2/scaling/default=0 at 0 and 1 at 1cm,
    new object={
      store=/tikz/data visualization/#1/polar transformer,
      class=polar transformer,
      arg1/.expanded=\pgfkeysvalueof{/tikz/data visualization/angle axis/attribute}/scaled,
      arg2/.expanded=\pgfkeysvalueof{/tikz/data visualization/radius axis/attribute}/scaled,
      arg3 from key=/tikz/data visualization/#1/unit vector 0 degrees,
      arg4 from key=/tikz/data visualization/#1/unit vector 90 degrees
    },
    /tikz/data visualization/#1/unit vector 0 degrees/.initial=\pgfqpoint{1pt}{0pt},
    /tikz/data visualization/#1/unit vector 90 degrees/.initial=\pgfqpoint{0pt}{1pt},
    /tikz/data visualization/#1/@min/.initial=0,
    /tikz/data visualization/#1/@max/.initial=360,
    /tikz/data visualization/#1/@quarter/.style={visualize radius axis at=90},
    /tikz/data visualization/#1/@half/.style={visualize radius axis at=180},
    /tikz/data visualization/#1/@threequarter/.style={visualize radius axis at=270},
  },
  new polar axes/.default={angle axis}{radius axis}
}
\def\tikz@lib@dv@polar@a#1{
  \pgfkeyssetvalue{\tikz@dv@axis/unit vector 0 degrees}{#1}
}
\def\tikz@lib@dv@polar@b#1{
  \pgfkeyssetvalue{\tikz@dv@axis/unit vector 90 degrees}{#1}
}


\tikzset{
  /tikz/data visualization/axis options/.cd,
  unit vectors/.code 2 args={
    \tikz@scan@one@point\tikz@lib@dv@polar@a#1
    \tikz@scan@one@point\tikz@lib@dv@polar@b#2
  },
  degrees/.style={\tikz@dv@axis/scaling=0 at 0 and 1 at 1},
  radians/.style={\tikz@dv@axis/scaling=0 at 0 and pi at 180},
  percent/.style={\tikz@dv@axis/scaling=0 at 0 and 1 at 3.6},
  full circle/.style={\tikz@dv@axis/scaling=min at 0 and max at 360},
  half circle/.style={\tikz@dv@axis/scaling=min at 0 and max at 180},
  quarter circle/.style={\tikz@dv@axis/scaling=min at 0 and max at 90}
}




\tikzdatavisualizationset{
  scientific polar axes/.style={
    new polar axes,
    angle axis={attribute=angle},
    radius axis={attribute=radius},
    every axis/.append style={style={draw=black!50}},
    every ticks/.append style={style={draw=black!50}},
    radius axis={
      include values=0,
      length=0.5*(\pgfkeysvalueof{/tikz/data visualization/scientific axes/width}),
      ticks={few},
      padding=0.75em,
      visualize ticks={
        common={angle axis={goto=0}, direction axis=angle axis},
        major={tick text at high, options at=0 as [{style={draw=none},no tick text}]
        }
      },
      visualize ticks={
        common={angle axis={goto=90}, direction axis=angle axis},
        major={tick text at high, options at=0 as [{style={draw=none},no tick text}]
        }
      },
      visualize ticks={
        common={angle axis={goto=180}, direction axis=angle axis},
        major={tick text at high, options at=0 as [{style={draw=none},no tick text}]
        }
      },
      visualize ticks={
        common={angle axis={goto=270}, direction axis=angle axis},
        major={tick text at high, options at=0 as [{style={draw=none},no tick text}]
        }
      },
      visualize axis={angle axis={goto=0},high=padded max},
      visualize axis={angle axis={goto=90},high=padded max},
      visualize axis={angle axis={goto=180},high=padded max},
      visualize axis={angle axis={goto=270},high=padded max},
      visualize grid={common={direction axis=angle axis,low=0,high=360}},
%%      visualize label=visualize x axis label
    },
    angle axis={
      ticks={compute step=\relax},
      tick placement strategy={\tikzdatavisualizationset{major={at={0,15,...,345}}}},
      visualize axis={radius axis={goto=max},low=0,high=360},
      visualize ticks={common={radius axis={goto=max},direction axis=radius axis},major={tick text at high}},
      visualize grid={common={direction axis=radius axis},low=0,high=padded max},
%      visualize label=visualize y axis label
    },
%    scientific axes standard labels,
    every scientific polar axes/.try
  }
}




\endinput
