% Copyright 2008 by Till Tantau
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/generic/pgf/licenses/LICENSE for more details.

\ProvidesFileRCS[v\pgfversion] $Header$

\usepgfmodule{datavisualization}

%
% This file provides the basic data visualization automata. For more
% advanced automata, you more specialized libraries are used.
%


%
%  
%

\pgfdeclaredatavisualizationautomaton{locate on canvas}
{
  \set{visualize}
  {
    {
      \pgftransformreset
      \pgfkeysvalueof{/data point/canvas transformation}
      \pgfpointtransformed{\pgfpointorigin}
      % Smuggle outside group
      \expandafter
    }%
    \edef\pgf@marshal{%
      \noexpand\pgfkeyssetvalue{/data point/canvas x}{\the\pgf@x}
      \noexpand\pgfkeyssetvalue{/data point/canvas y}{\the\pgf@y}
    }%
    \pgf@marshal%
  }
}

\pgfdeclaredatavisualizationautomaton{linear axis}
{
  \set{visualize}
  {
    \pgfkeysifdefined{/data point/\valueof{attribute}}
    {
      \pgf@process{\pgfpointscale{\pgfkeysvalueof{/data point/\valueof{attribute}}}{\valueof{vec}}}%
      \edef\pgf@marshal{%
        \noexpand\pgfkeysaddvalue{/data point/canvas transformation}{}{%
          \noexpand\pgftransformshift{\noexpand\pgfqpoint{\the\pgf@x}{\the\pgf@y}}}}%
      \pgf@marshal%
    }
    {}
  }
}

\endinput
