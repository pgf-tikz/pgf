\documentclass{minimal}
\input{pgf-regression-test}
\RequirePackage{fp,pgf,tikz,xcolor}

\usepgflibrary{fpu}
\usepgflibrary{fpu}
\usepgflibrary{fpu}
\usepgflibrary{fpu}
\usepgflibrary{fpu}
\usetikzlibrary{fpu}
\usetikzlibrary{fpu}
\usetikzlibrary{fpu}

\begin{document}

\BEGINBOXTEST{pgfmanual-en-library-fpu-1}
\pgfkeys{/pgf/fpu}
\pgfmathparse{1+1}\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-2}
\pgfkeys{/pgf/fpu,/pgf/fpu/output format=float}
\pgfmathparse{exp(50)*42}\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-3}
\pgfkeys{/pgf/fpu,/pgf/fpu/output format=sci}
\pgfmathparse{4.22e-8^-2}\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-4}
\pgfkeys{/pgf/fpu,/pgf/fpu/output format=fixed}
\pgfmathparse{sqrt(1e-12)}\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-5}
\pgfkeys{/pgf/fpu=false}
\begingroup
\pgfkeys{/pgf/fpu/install only={divide}}
\pgfmathparse{12.34/0.001234}\pgfmathresult (good)
\pgfmathparse{12/4}\pgfmathresult (bad)
\endgroup
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-6}
\pgfmathfloatparsenumber{2}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-7}
\pgfmathfloatparsenumber{0}
\pgfmathfloattomacro{\pgfmathresult}{\F}{\M}{\E}
Flags: \F; Mantissa \M; Exponent \E.
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-8}
\pgfmathfloatparsenumber{0.2}
\pgfmathfloattomacro{\pgfmathresult}{\F}{\M}{\E}
Flags: \F; Mantissa \M; Exponent \E.
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-9}
\pgfmathfloatparsenumber{42}
\pgfmathfloattomacro{\pgfmathresult}{\F}{\M}{\E}
Flags: \F; Mantissa \M; Exponent \E.
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-10}
\pgfmathfloatparsenumber{20.5E+2}
\pgfmathfloattomacro{\pgfmathresult}{\F}{\M}{\E}
Flags: \F; Mantissa \M; Exponent \E.
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-11}
\pgfmathfloatparsenumber{1e6}
\pgfmathfloattomacro{\pgfmathresult}{\F}{\M}{\E}
Flags: \F; Mantissa \M; Exponent \E.
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-12}
\pgfmathfloatparsenumber{5.21513e-11}
\pgfmathfloattomacro{\pgfmathresult}{\F}{\M}{\E}
Flags: \F; Mantissa \M; Exponent \E.
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-13}
\pgfmathfloatparsenumber{0.00052}
\pgfmathfloattomacro{\pgfmathresult}{\F}{\M}{\E}
Flags: \F; Mantissa \M; Exponent \E
$\to$
\pgfmathfloattofixed{\pgfmathresult}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-14}
\pgfmathfloatparsenumber{123.456e4}
\pgfmathfloattomacro{\pgfmathresult}{\F}{\M}{\E}
Flags: \F; Mantissa \M; Exponent \E
$\to$
\pgfmathfloattofixed{\pgfmathresult}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-15}
\pgfmathfloatparsenumber{123456}
\pgfmathfloattoint{\pgfmathresult}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-16}
\pgfmathfloatcreate{1}{1.0}{327}
\pgfmathfloattomacro{\pgfmathresult}{\F}{\M}{\E}
Flags: \F; Mantissa \M; Exponent \E
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-17}
\pgfmathfloatparsenumber{42}
\pgfmathfloatifflags{\pgfmathresult}{0}{It's zero!}{It's not zero!}
\pgfmathfloatifflags{\pgfmathresult}{1}{It's positive!}{It's not positive!}
\pgfmathfloatifflags{\pgfmathresult}{2}{It's negative!}{It's not negative!}

\pgfmathfloatifflags{\pgfmathresult}{+}{It's positive!}{It's not positive!}
\pgfmathfloatifflags{\pgfmathresult}{-}{It's negative!}{It's not negative!}
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-18}
\pgfmathroundto{1}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-19}
\pgfmathroundto{4.685}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-20}
\pgfmathroundto{19999.9996}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-21}
\pgfmathroundtozerofill{1}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-22}
\pgfmathroundto{4.685}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-23}
\pgfmathroundtozerofill{19999.9996}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-24}
\pgfmathfloatparsenumber{52.5864}
\pgfmathfloatround{\pgfmathresult}
\pgfmathfloattosci{\pgfmathresult}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-25}
\pgfmathfloatparsenumber{9.995}
\pgfmathfloatround{\pgfmathresult}
\pgfmathfloattosci{\pgfmathresult}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-26}
\pgfmathfloatparsenumber{52.5864}
\pgfmathfloatroundzerofill{\pgfmathresult}
\pgfmathfloattosci{\pgfmathresult}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-27}
\pgfmathfloatparsenumber{9.995}
\pgfmathfloatroundzerofill{\pgfmathresult}
\pgfmathfloattosci{\pgfmathresult}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-28}
\pgfmathlog{1.452e-7}
\pgfmathresult
\ENDBOXTEST

\BEGINBOXTEST{pgfmanual-en-library-fpu-29}
\pgfmathlog{6.426e+8}
\pgfmathresult
\ENDBOXTEST
\END
