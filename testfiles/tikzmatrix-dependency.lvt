% Examples from documentation of tikz-dependency
% with minor simplification of syntax, mostly from the title page,
% but some others with constructs not covered there.
%
% We use & instead of \& as word separator, to test whether it works.
\documentclass[tikz]{standalone}
\usepackage{tikz-dependency}
\input{regression-test}

\begin{document}
\showoutput
\START
\BEGINTEST{rather-long}
\begin{dependency}
  \begin{deptext}[column sep=0.2cm]
    My &[.5cm] dog & also &[.7cm] likes &[.4cm] eating & sausage & and & more & words \\
  \end{deptext}
  \depedge{2}{1}{poss}
  \depedge{4}{2}{nsubj}
  \depedge{4}{3}{advmod}
  \depedge{4}{5}{xcomp}
  \depedge{5}{6}{dobj}
  \deproot{4}{root}
  \depedge[edge unit distance=1.5ex]{9}{1}{rather-long}
\end{dependency}
\ENDTEST

\BEGINTEST{circle shapes}
\begin{dependency}[label style = {circle}]
  \begin{deptext}[column sep=.5cm, row sep=.1ex]
    PRP\$ & NN & RB &[.5cm] VBZ \\
    My & dog & also & likes & \dots \\
  \end{deptext}
  \deproot{4}{root}
  \depedge{2}{1}{poss}
  \depedge{4}{2}{nsubj}
  \depedge{4}{3}{advmod}
\end{dependency}
\ENDTEST

\BEGINTEST{other shapes}
\begin{dependency}[label style = {trapezium}]
  \begin{deptext}[column sep=.5cm, row sep=.1ex]
    PRP\$ & NN & RB &[.5cm] VBZ \\
    My & dog & also & likes & \dots \\
  \end{deptext}
  \deproot[label style = {star}]{4}{root}
  \depedge{2}{1}{poss}
  \depedge{4}{2}{nsubj}
  \depedge{4}{3}{advmod}
\end{dependency}
\ENDTEST

\BEGINTEST{anchors}
\begin{dependency}
   \begin{deptext}[column sep=.5cm, row sep=.1ex]
      PRP\$ & NN & RB &[.5cm] VBZ & VBG & NN \\
      My & dog & also & likes & eating & sausage \\
   \end{deptext}
   \deproot{4}{root}
   \depedge{2}{1}{poss}
   \depedge{4}{2}{nsubj}
   \depedge{4}{3}{advmod}
   \depedge{4}{5}{xcomp}
   \depedge{5}{6}{dobj}
   \foreach \a/\pos in {south/below of,north/above of,east/right of,west/left of} {
      \node (tmp) at (\matrixref.\a) [draw, circle, fill=red, inner sep=1pt] {};
      \node (tmp2) [\pos = tmp] {\a} -- (tmp);
      \draw [->] (tmp2) -- (tmp);
   };
\end{dependency}
\ENDTEST

\BEGINTEST{simple annotation}
\begin{dependency}
   \begin{deptext}[column sep=.5cm, row sep=.1ex]
      PRP\$ & NN & RB &[.5cm] VBZ & VBG & NN \\
      My & dog & also & likes & eating & sausage \\
   \end{deptext}
   \deproot{4}{root}
   \depedge{2}{1}{poss}
   \depedge{4}{2}{nsubj}
   \depedge{4}{3}{advmod}
   \depedge{4}{5}{xcomp}
   \depedge{5}{6}{dobj}
   \node (silly1) [above right of = \wordref{1}{6}, xshift = 2cm] {Top right};
   \node (silly2) [below left of = \wordref{2}{1}, xshift = -2cm] {Bottom left};
   \draw [->, very thick, red] (silly1) -- (\wordref{1}{6});
   \draw [->, very thick, red] (silly2) -- (\wordref{2}{1});
\end{dependency}
\ENDTEST

\BEGINTEST{More annotation}
\begin{dependency}
   \begin{deptext}[column sep=.5cm, row sep=.1ex]
      PRP\$ & NN & RB &[.5cm] VBZ & VBG & NN \\
      My & dog & also & likes & eating & sausage \\
   \end{deptext}
   \deproot{4}{root}
   \depedge{2}{1}{poss}
   \depedge{4}{2}{nsubj}
   \depedge{4}{3}{advmod}
   \depedge{4}{5}{xcomp}
   \depedge{5}{6}{dobj}
   \node (silly) [above right of = \rootref, xshift = 3cm] {This is the root node!};
   \draw [->, very thick, red] (silly) -- (\rootref);
   \draw [thick, blue] (\rootref)--(\wordref{1}{2})--(\wordref{2}{6})--(\rootref);
\end{dependency}
\ENDTEST

\BEGINTEST{Annotation: labels and edge corners}
\begin{dependency}
  \begin{deptext}[column sep=.5cm, row sep=.1ex]
    PRP\$ & NN & RB &[.5cm] VBZ & VBG & NN \\
    My & dog & also & likes & eating & sausage \\
  \end{deptext}
  \deproot{4}{root}
  \depedge{2}{1}{poss}
  \storelabelnode\firstlab
  \storefirstcorner\firstcorner
  \depedge{4}{2}{nsubj}
  \depedge{4}{3}{advmod}
  \depedge{4}{5}{xcomp}
  \depedge{5}{6}{dobj}
  \storelabelnode\secondlab
  \storesecondcorner\secondcorner
  \draw [<->,out=90,in=-90, thick, red] (\firstlab) to
    node [fill=red, text=white, font=\bfseries, above, near start, sloped]
    {labels!} (\secondlab);
  \draw [<->, out=-90,in=90, thick, blue!60] (\firstcorner) to
    node [fill=blue!60, text=white, font=\bfseries, above, near end, sloped]
    {edge corners!} (\secondcorner);
\end{dependency}
\ENDTEST

\BEGINTEST{Fancy style for words}
\begin{dependency}[label style={font=\bfseries,fill=black,text=white}]
  \tikzstyle{root}=[fill=yellow, text=black, font=\bfseries]
  \tikzstyle{postag}=[font=\tiny]
  \tikzset{arg/.style={rounded corners,inner sep=.4ex,top color=#1!60,draw=#1!60!black}}
  \tikzset{rolelab/.style={inner sep=1ex,top color=#1!60,draw=#1!60!black,text=black}}
  \begin{deptext}[column sep=.4cm, row sep=.5ex, row 1/.style = postag]
    NN & MD & VB & PRP\$ & NN & RBR \\
    TikZ dependency & will & make & your & life & easier \\
  \end{deptext}
  \deproot[label style=root]{3}{root}
  \depedge{3}{1}{nsubj}
  \depedge{3}{2}{aux}
  \depedge{5}{4}{poss}
  \depedge{3}{5}{dobj}
  \depedge{3}{6}{advmod}
  \wordgroup[arg=green]{2}{3}{3}{pred}
  \wordgroup[arg=red]{2}{1}{1}{a0}
  \wordgroup[arg=blue]{2}{4}{6}{a1}
  \groupedge[edge below,red!60!black,label style={rolelab=red}]{pred}{a0}{ARG0}{5ex}
  \groupedge[edge below,blue!60!black,label style={rolelab=blue}]{pred}{a1}{ARG1}{5ex}
\end{dependency}
\ENDTEST

\BEGINTEST{Many arrows}
\begin{dependency}[theme = simple]
  \begin{deptext}[column sep=1em]
    A & hearing & is & scheduled & on & the & issue & today & . \\
  \end{deptext}
  \deproot{3}{ROOT}
  \depedge{2}{1}{ATT}
  \depedge[edge start x offset=-6pt]{2}{5}{ATT}
  \depedge{3}{2}{SBJ}
  \depedge{3}{9}{PU}
  \depedge{3}{4}{VC}
  \depedge{4}{8}{TMP}
  \depedge{5}{7}{PC}
  \depedge[arc angle=50]{7}{6}{ATT}
\end{dependency}
\ENDTEST

\depstyle{inner bubble}{draw=gray!80, minimum height=20pt,
  rounded corners=8pt, inner sep=2pt, top color=gray!40,
  bottom color=white}
\depstyle{outer bubble}{draw=gray!80, minimum height=26pt,
  rounded corners=10pt, inner sep=5pt, top color=white,
  bottom color=gray!40}
\depstyle{ungrammatical}{edge below, edge style = {ultra thick, red},
  label style = {below, text=red}, text only label}

\BEGINTEST{Arrows and fancy words}
\begin{dependency}[hide label, arc edge,
  edge vertical padding=-2pt,
  group style=outer bubble]
  \begin{deptext}[column sep=1.4em]
    a & student & whose & mother & and & his & father & peter & knows \\
  \end{deptext}
  \wordgroup{1}{3}{7}{chubby}
  \wordgroup{1}{1}{2}{first} \depedge{2}{1}{}
  \wordgroup[inner bubble]{1}{3}{4}{second} \depedge{4}{3}{}
  \wordgroup[inner bubble]{1}{6}{7}{third} \depedge{7}{6}{}
  \wordgroup{1}{8}{8}{fourth}
  \wordgroup{1}{9}{9}{fifth}
  \groupedge{fifth}{fourth}{}{0}
  \groupedge[ungrammatical]{first}{second}{ungrammatical}{.5cm}
  \groupedge[edge above]{second}{fifth}{}{1.5cm}
  \groupedge[edge above]{fifth}{chubby}{}{1cm}
\end{dependency}
\ENDTEST

\BEGINTEST{Fancy everything: rotated words etc.}
\begin{dependency}[edge style={green!60!black,very thick},
  label style={fill=blue!60,font=\bfseries,text=white}]
  \tikzstyle{POS}=[font=\footnotesize\bfseries,text=blue!60!black]
  \tikzstyle{word}=[draw=blue!60!black, shade, text=black,
  rotate=45, anchor=north east, inner sep=1ex,
  font=\normalsize, top color=blue!60, rounded corners]
  \begin{deptext}[column sep=.5cm, row sep=0, nodes={POS},
    row 2/.style={nodes=word}]
    PRP\$ &  NN &  RB &[.5cm] VBZ &  VBG &  NN \\
    My & dog & also & likes & eating & sausage \\
  \end{deptext}
  \deproot{4}{root}
  \depedge[edge style={blue!60!black,ultra thick},
  label style={fill=green!60,font=\bfseries,text=black, rotate=10}]{2}{1}{poss}
  \depedge{4}{2}{nsubj}
  \depedge{4}{3}{advmod}
  \depedge{4}{5}{xcomp}
  \depedge{5}{6}{dobj}
\end{dependency}
\ENDTEST
\END
\end{document}
